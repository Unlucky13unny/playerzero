document.addEventListener('DOMContentLoaded', function() {
    // Set up tab switching
    setupTabs();
    
    // Set up verification modal
    setupModal();
});

// Setup tab switching functionality
function setupTabs() {
    // Main tabs (All-Time vs Weekly)
    const mainTabs = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.leaderboard-content');
    
    mainTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            // Remove active class from all tabs
            mainTabs.forEach(t => t.classList.remove('active'));
            
            // Add active class to clicked tab
            tab.classList.add('active');
            
            // Hide all tab contents
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Show the selected tab content
            const targetTab = tab.getAttribute('data-tab');
            document.getElementById(targetTab + '-tab').classList.add('active');
        });
    });
    
    // Category tabs (PlayerZero Score, Distance, etc.)
    const categoryTabs = document.querySelectorAll('.category-btn');
    
    categoryTabs.forEach(tab => {
        tab.addEventListener('click', () => {
            // Remove active class from all category tabs
            categoryTabs.forEach(t => t.classList.remove('active'));
            
            // Add active class to clicked tab
            tab.classList.add('active');
            
            // This would fetch and display the leaderboard for the selected category
            const category = tab.getAttribute('data-category');
            loadLeaderboard(category);
        });
    });
}

// Set up the verification modal
function setupModal() {
    const modal = document.getElementById('verification-modal');
    const verifyBtns = document.querySelectorAll('.verify-btn');
    const closeBtn = document.querySelector('.close-btn');
    
    // Open modal when verify button is clicked
    verifyBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const playerName = btn.getAttribute('data-player');
            openVerificationModal(playerName);
        });
    });
    
    // Close modal when X is clicked
    closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
    });
    
    // Close modal when clicking outside
    window.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });
    
    // Set up report button
    document.getElementById('report-btn').addEventListener('click', () => {
        alert('Report submitted. Our team will review this entry.');
    });
}

// Open verification modal with player data
function openVerificationModal(playerName) {
    // In a real implementation, this would fetch player verification data
    // For now, we'll use the example data
    
    document.getElementById('modal-player-name').textContent = playerName;
    document.getElementById('verification-modal').style.display = 'block';
    
    // This would update the verification images and data in a real implementation
    // updateVerificationData(playerData);
}

// Load leaderboard data for a specific category
function loadLeaderboard(category) {
    // This would fetch leaderboard data from the server
    console.log('Loading leaderboard for category:', category);
    
    // For now, we'll just use the example data already in the HTML
    // In a real implementation, this would update the table with new data
}

// Search for a player
document.getElementById('search-btn').addEventListener('click', () => {
    const searchTerm = document.getElementById('player-search').value.trim();
    if (searchTerm) {
        // This would search for a player
        console.log('Searching for player:', searchTerm);
        alert('Player search functionality would go here');
    }
});

// Find my rank button
document.getElementById('find-me-btn').addEventListener('click', () => {
    // This would find the current user's rank
    console.log('Finding your rank');
    alert('In a real implementation, this would scroll to your position in the leaderboard');
});

// Team filter functionality
document.getElementById('team-select').addEventListener('change', (e) => {
    const team = e.target.value;
    console.log('Filtering by team:', team);
    // This would filter the leaderboard by team
});
