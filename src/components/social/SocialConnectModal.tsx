"use client"

import React, { useState } from "react"
import { X } from "lucide-react"
import type { JSX } from "react" // Declaring JSX variable

interface SocialPlatform {
  id: string
  name: string
  icon: JSX.Element
  placeholder: string
  urlPrefix?: string
  isGray?: boolean
}

const socialPlatforms: SocialPlatform[] = [
  {
    id: "github",
    name: "GitHub",
    icon: (
      <svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22" cy="22" r="22" fill="black"/>
        <path d="M22.5 8.5C20.6831 8.5 18.884 8.85786 17.2055 9.55314C15.5269 10.2484 14.0017 11.2675 12.717 12.5522C10.1224 15.1468 8.66479 18.6659 8.66479 22.3352C8.66479 28.4503 12.6355 33.6385 18.128 35.4786C18.8198 35.5893 19.0412 35.1604 19.0412 34.7868V32.4487C15.2088 33.2788 14.3926 30.5948 14.3926 30.5948C13.7561 28.9899 12.8568 28.561 12.8568 28.561C11.5978 27.7032 12.9537 27.7309 12.9537 27.7309C14.3372 27.8277 15.0705 29.1559 15.0705 29.1559C16.2741 31.2588 18.3079 30.6363 19.0965 30.3042C19.221 29.4049 19.5807 28.7962 19.9681 28.4503C16.8967 28.1044 13.6731 26.9146 13.6731 21.6434C13.6731 20.1077 14.1989 18.8764 15.0981 17.8941C14.9598 17.5482 14.4756 16.1093 15.2365 14.2416C15.2365 14.2416 16.3987 13.868 19.0412 15.6528C20.1341 15.3484 21.324 15.1962 22.5 15.1962C23.6759 15.1962 24.8658 15.3484 25.9587 15.6528C28.6013 13.868 29.7634 14.2416 29.7634 14.2416C30.5244 16.1093 30.0401 17.5482 29.9018 17.8941C30.8011 18.8764 31.3268 20.1077 31.3268 21.6434C31.3268 26.9284 28.0894 28.0906 25.0041 28.4365C25.5022 28.8654 25.9587 29.7093 25.9587 30.996V34.7868C25.9587 35.1604 26.1801 35.6031 26.8857 35.4786C32.3783 33.6247 36.3351 28.4503 36.3351 22.3352C36.3351 20.5183 35.9773 18.7192 35.282 17.0407C34.5867 15.3621 33.5676 13.8369 32.2829 12.5522C30.9982 11.2675 29.473 10.2484 27.7944 9.55314C26.1159 8.85786 24.3168 8.5 22.5 8.5Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
    urlPrefix: "https://github.com/",
  },
  {
    id: "facebook",
    name: "Facebook",
    icon: (
      <svg width="45" height="44" viewBox="0 0 45 44" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22.3334" cy="22" r="22" fill="black"/>
        <path d="M24.9478 44.0006V28.2209H29.9009L30.6371 22.0426H24.9478V18.1073C24.9478 16.3245 25.41 15.1038 27.7907 15.1038H30.8073V9.59557C29.3396 9.42518 27.8642 9.34354 26.3881 9.35106C22.01 9.35106 19.0042 12.2236 19.0042 17.497V22.0311H14.0834V28.2093H19.0149V44.0006H24.9478Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "vimeo",
    name: "Vimeo",
    icon: (
      <svg viewBox="0 0 24 24" className="w-6 h-6 fill-white">
        <path d="M23.977 6.416c-.105 2.338-1.739 5.543-4.894 9.609-3.268 4.247-6.026 6.37-8.29 6.37-1.409 0-2.578-1.294-3.553-3.881L5.322 11.4C4.603 8.816 3.834 7.522 3.01 7.522c-.179 0-.806.378-1.881 1.132L0 7.197c1.185-1.044 2.351-2.084 3.501-3.128C5.08 2.701 6.266 1.984 7.055 1.91c1.867-.18 3.016 1.1 3.447 3.838.465 2.953.789 4.789.971 5.507.539 2.45 1.131 3.674 1.776 3.674.502 0 1.256-.796 2.265-2.385 1.004-1.589 1.54-2.797 1.612-3.628.144-1.371-.395-2.061-1.614-2.061-.574 0-1.167.121-1.777.391 1.186-3.868 3.434-5.757 6.762-5.637 2.473.06 3.628 1.664 3.493 4.797l-.013.01z" />
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "discord",
    name: "Discord",
    icon: (
      <svg width="44" height="45" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22" cy="22.25" r="22" fill="black"/>
        <path d="M30.6749 15.2459C29.1791 14.5485 27.5595 14.0424 25.8724 13.75C25.8428 13.7504 25.8145 13.7626 25.7937 13.7837C25.5912 14.1549 25.3551 14.6385 25.1976 15.0097C23.4082 14.7399 21.5884 14.7399 19.799 15.0097C19.6415 14.6273 19.4053 14.1549 19.1917 13.7837C19.1804 13.7612 19.1467 13.75 19.1129 13.75C17.4259 14.0424 15.8175 14.5485 14.3104 15.2459C14.2992 15.2459 14.2879 15.2571 14.2767 15.2684C11.2175 19.8459 10.3739 24.2998 10.7901 28.7086C10.7901 28.7311 10.8013 28.7536 10.8238 28.7649C12.8483 30.2495 14.794 31.1492 16.7173 31.7453C16.751 31.7566 16.7848 31.7453 16.796 31.7228C17.2459 31.1043 17.6508 30.4519 17.9995 29.7659C18.022 29.7209 17.9995 29.6759 17.9545 29.6646C17.3134 29.4172 16.706 29.1248 16.1099 28.7874C16.065 28.7649 16.065 28.6974 16.0987 28.6636C16.2224 28.5737 16.3461 28.4724 16.4699 28.3825C16.4924 28.36 16.5261 28.36 16.5486 28.3712C20.4176 30.137 24.5903 30.137 28.4143 28.3712C28.4368 28.36 28.4705 28.36 28.493 28.3825C28.6167 28.4837 28.7404 28.5737 28.8641 28.6749C28.9091 28.7086 28.9091 28.7761 28.8529 28.7986C28.268 29.1473 27.6495 29.4284 27.0084 29.6759C26.9634 29.6871 26.9521 29.7434 26.9634 29.7771C27.3233 30.4632 27.7282 31.1155 28.1668 31.7341C28.2006 31.7453 28.2343 31.7566 28.2681 31.7453C30.2025 31.1492 32.1483 30.2495 34.1728 28.7649C34.1953 28.7536 34.2065 28.7311 34.2065 28.7086C34.7014 23.6137 33.3855 19.1936 30.7199 15.2684C30.7087 15.2571 30.6974 15.2459 30.6749 15.2459ZM18.5843 26.0206C17.4259 26.0206 16.4586 24.9521 16.4586 23.6362C16.4586 22.3203 17.4034 21.2518 18.5843 21.2518C19.7765 21.2518 20.7213 22.3315 20.71 23.6362C20.71 24.9521 19.7653 26.0206 18.5843 26.0206ZM26.4235 26.0206C25.2651 26.0206 24.2978 24.9521 24.2978 23.6362C24.2978 22.3203 25.2426 21.2518 26.4235 21.2518C27.6157 21.2518 28.5605 22.3315 28.5492 23.6362C28.5492 24.9521 27.6157 26.0206 26.4235 26.0206Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "instagram",
    name: "Instagram",
    icon: (
      <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22.3333" cy="22.25" r="22" fill="black"/>
        <path d="M17.5033 10.75H27.1633C30.8433 10.75 33.8333 13.74 33.8333 17.42V27.08C33.8333 28.849 33.1305 30.5455 31.8797 31.7964C30.6288 33.0473 28.9322 33.75 27.1633 33.75H17.5033C13.8233 33.75 10.8333 30.76 10.8333 27.08V17.42C10.8333 15.651 11.536 13.9545 12.7868 12.7036C14.0377 11.4527 15.7343 10.75 17.5033 10.75ZM17.2733 13.05C16.1753 13.05 15.1222 13.4862 14.3458 14.2626C13.5694 15.039 13.1333 16.092 13.1333 17.19V27.31C13.1333 29.5985 14.9848 31.45 17.2733 31.45H27.3933C28.4912 31.45 29.5443 31.0138 30.3207 30.2374C31.0971 29.461 31.5333 28.408 31.5333 27.31V17.19C31.5333 14.9015 29.6818 13.05 27.3933 13.05H17.2733ZM28.3708 14.775C28.752 14.775 29.1176 14.9265 29.3872 15.196C29.6568 15.4656 29.8083 15.8313 29.8083 16.2125C29.8083 16.5937 29.6568 16.9594 29.3872 17.229C29.1176 17.4985 28.752 17.65 28.3708 17.65C27.9895 17.65 27.6239 17.4985 27.3543 17.229C27.0847 16.9594 26.9333 16.5937 26.9333 16.2125C26.9333 15.8313 27.0847 15.4656 27.3543 15.196C27.6239 14.9265 27.9895 14.775 28.3708 14.775ZM22.3333 16.5C23.8582 16.5 25.3208 17.1058 26.3991 18.1841C27.4774 19.2625 28.0833 20.725 28.0833 22.25C28.0833 23.775 27.4774 25.2375 26.3991 26.3159C25.3208 27.3942 23.8582 28 22.3333 28C20.8083 28 19.3457 27.3942 18.2674 26.3159C17.1891 25.2375 16.5833 23.775 16.5833 22.25C16.5833 20.725 17.1891 19.2625 18.2674 18.1841C19.3457 17.1058 20.8083 16.5 22.3333 16.5ZM22.3333 18.8C21.4183 18.8 20.5407 19.1635 19.8937 19.8105C19.2467 20.4575 18.8833 21.335 18.8833 22.25C18.8833 23.165 19.2467 24.0425 19.8937 24.6895C20.5407 25.3365 21.4183 25.7 22.3333 25.7C23.2482 25.7 24.1258 25.3365 24.7728 24.6895C25.4198 24.0425 25.7833 23.165 25.7833 22.25C25.7833 21.335 25.4198 20.4575 24.7728 19.8105C24.1258 19.1635 23.2482 18.8 22.3333 18.8Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
    urlPrefix: "https://instagram.com/",
    isGray: false, // Updated since the new SVG has its own black background
  },
  {
    id: "snapchat",
    name: "Snapchat",
    icon: (
      <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22.6666" cy="22.25" r="22" fill="black"/>
        <path fillRule="evenodd" clipRule="evenodd" d="M23.8164 33.138L23.8043 33.1402L23.7261 33.1787L23.7041 33.1831L23.6887 33.1787L23.6106 33.1402C23.5989 33.1365 23.5901 33.1384 23.5842 33.1457L23.5798 33.1567L23.5611 33.6276L23.5666 33.6496L23.5776 33.6639L23.692 33.7453L23.7085 33.7497L23.7217 33.7453L23.8362 33.6639L23.8494 33.6463L23.8538 33.6276L23.8351 33.1578C23.8321 33.1461 23.8259 33.1395 23.8164 33.138ZM24.1079 33.0137L24.0936 33.0159L23.8901 33.1182L23.8791 33.1292L23.8758 33.1413L23.8956 33.6144L23.9011 33.6276L23.9099 33.6353L24.131 33.7376C24.145 33.7413 24.1556 33.7384 24.1629 33.7288L24.1673 33.7134L24.1299 33.0379C24.1263 33.0247 24.1189 33.0166 24.1079 33.0137ZM23.3213 33.0159C23.3164 33.0129 23.3106 33.012 23.3051 33.0132C23.2996 33.0144 23.2947 33.0178 23.2916 33.0225L23.285 33.0379L23.2476 33.7134C23.2483 33.7266 23.2545 33.7354 23.2663 33.7398L23.2828 33.7376L23.5039 33.6353L23.5149 33.6265L23.5193 33.6144L23.538 33.1413L23.5347 33.1281L23.5237 33.1171L23.3213 33.0159Z" fill="white"/>
        <path fillRule="evenodd" clipRule="evenodd" d="M23.164 10.75C21.4132 10.75 19.7341 11.4455 18.4962 12.6835C17.2582 13.9214 16.5627 15.6005 16.5627 17.3513V19.4142L15.5725 18.6715C15.4569 18.5848 15.3254 18.5218 15.1854 18.4859C15.0455 18.45 14.8998 18.4421 14.7568 18.4625C14.6138 18.483 14.4762 18.5314 14.3518 18.605C14.2275 18.6786 14.1189 18.776 14.0322 18.8916C13.9455 19.0071 13.8825 19.1387 13.8466 19.2786C13.8107 19.4186 13.8028 19.5643 13.8232 19.7073C13.8437 19.8503 13.8921 19.9879 13.9657 20.1122C14.0393 20.2366 14.1367 20.3452 14.2523 20.4319L16.3053 21.9722C15.8168 23.2572 14.6252 24.6017 12.6966 25.7602C12.5701 25.8378 12.4604 25.94 12.374 26.0608C12.2877 26.1815 12.2264 26.3183 12.1938 26.4631C12.1612 26.6079 12.1579 26.7578 12.1842 26.9039C12.2104 27.0499 12.2657 27.1893 12.3467 27.3137C13.5767 29.1587 15.5285 30.5538 17.6629 30.5538C18.4078 30.5538 18.9865 31.0269 19.5597 31.4439C20.365 32.0281 21.4289 32.7542 23.164 32.7542C24.899 32.7542 25.9618 32.0292 26.7672 31.4439C27.3415 31.0258 27.9202 30.5538 28.665 30.5538C30.7994 30.5538 32.7512 29.1587 33.9812 27.3137C34.0623 27.1893 34.1175 27.0499 34.1438 26.9039C34.17 26.7578 34.1668 26.6079 34.1342 26.4631C34.1016 26.3183 34.0403 26.1815 33.9539 26.0608C33.8675 25.94 33.7579 25.8378 33.6314 25.7602C31.7027 24.6017 30.5112 23.2572 30.0227 21.9722L32.0757 20.4319C32.3091 20.2568 32.4634 19.9961 32.5047 19.7073C32.546 19.4184 32.4708 19.125 32.2957 18.8916C32.1206 18.6581 31.86 18.5038 31.5711 18.4625C31.2823 18.4213 30.9889 18.4964 30.7554 18.6715L29.7652 19.4142V17.3513C29.7652 15.6005 29.0697 13.9214 27.8318 12.6835C26.5938 11.4455 24.9147 10.75 23.164 10.75ZM18.7631 17.3513C18.7631 16.1841 19.2268 15.0647 20.0521 14.2394C20.8774 13.4141 21.9968 12.9504 23.164 12.9504C24.3311 12.9504 25.4505 13.4141 26.2758 14.2394C27.1012 15.0647 27.5648 16.1841 27.5648 17.3513V20.6519C27.5648 23.0702 29.1271 25.2827 31.4574 26.9616C30.5926 27.8649 29.5727 28.3534 28.665 28.3534C27.1489 28.3534 26.1741 29.1543 25.4744 29.6637C24.7659 30.1786 24.1795 30.5538 23.164 30.5538C22.1485 30.5538 21.561 30.1786 20.8535 29.6637C20.1549 29.1543 19.1801 28.3534 17.6629 28.3534C16.7541 28.3534 15.7353 27.8649 14.8706 26.9616C17.2008 25.2827 18.7631 23.0713 18.7631 20.6519V17.3513Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "telegram",
    name: "Telegram",
    icon: (
      <svg width="44" height="45" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22" cy="22.5" r="22" fill="black"/>
        <path fillRule="evenodd" clipRule="evenodd" d="M22.4356 37.6228L22.4225 37.6252L22.3377 37.667L22.3138 37.6718L22.2971 37.667L22.2123 37.6252C22.1996 37.6212 22.19 37.6232 22.1836 37.6312L22.1789 37.6431L22.1586 38.1542L22.1645 38.1781L22.1765 38.1936L22.3007 38.2819L22.3186 38.2867L22.3329 38.2819L22.4571 38.1936L22.4714 38.1745L22.4762 38.1542L22.4559 37.6443C22.4527 37.6316 22.4459 37.6244 22.4356 37.6228ZM22.752 37.4879L22.7365 37.4903L22.5156 37.6013L22.5037 37.6133L22.5001 37.6264L22.5216 38.1399L22.5275 38.1542L22.5371 38.1625L22.7771 38.2736C22.7922 38.2776 22.8038 38.2744 22.8117 38.264L22.8165 38.2473L22.7759 37.5142C22.7719 37.4998 22.764 37.4911 22.752 37.4879ZM21.8982 37.4903C21.893 37.4871 21.8867 37.4861 21.8807 37.4874C21.8747 37.4887 21.8694 37.4923 21.866 37.4974L21.8588 37.5142L21.8182 38.2473C21.819 38.2616 21.8258 38.2712 21.8385 38.276L21.8564 38.2736L22.0965 38.1625L22.1084 38.153L22.1132 38.1399L22.1335 37.6264L22.1299 37.6121L22.118 37.6001L21.8982 37.4903Z" fill="white"/>
        <path fillRule="evenodd" clipRule="evenodd" d="M31.014 13.1403C31.3091 13.0161 31.6321 12.9732 31.9493 13.0162C32.2666 13.0592 32.5665 13.1864 32.8179 13.3847C33.0693 13.5829 33.263 13.8449 33.3788 14.1434C33.4946 14.4419 33.5282 14.7659 33.4762 15.0818L30.768 31.5087C30.5053 33.0932 28.7667 34.0019 27.3135 33.2126C26.0979 32.5523 24.2924 31.535 22.6684 30.4734C21.8564 29.9421 19.3691 28.2405 19.6748 27.0297C19.9375 25.9945 24.1169 22.1042 26.5051 19.7913C27.4424 18.8826 27.015 18.3584 25.908 19.1942C23.1592 21.2695 18.7458 24.4255 17.2866 25.3138C15.9994 26.0972 15.3283 26.2309 14.5258 26.0972C13.0619 25.8536 11.7042 25.4762 10.5961 25.0165C9.09865 24.3956 9.17149 22.337 10.5949 21.7376L31.014 13.1403Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "youtube",
    name: "YouTube",
    icon: (
      <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22.3334" cy="22.5" r="22" fill="black"/>
        <path d="M22.8334 12.8999C23.8594 12.8999 24.9118 12.9263 25.9318 12.9695L27.1366 13.0271L28.2898 13.0955L29.3698 13.1687L30.3562 13.2455C31.4268 13.327 32.4343 13.7836 33.2013 14.535C33.9683 15.2864 34.4455 16.2844 34.549 17.3531L34.597 17.8631L34.687 18.9551C34.771 20.0867 34.8334 21.3203 34.8334 22.4999C34.8334 23.6795 34.771 24.9131 34.687 26.0447L34.597 27.1367L34.549 27.6467C34.4455 28.7156 33.9681 29.7137 33.2009 30.4651C32.4336 31.2166 31.4258 31.6731 30.355 31.7543L29.371 31.8299L28.291 31.9043L27.1366 31.9727L25.9318 32.0303C24.8996 32.075 23.8665 32.0982 22.8334 32.0999C21.8002 32.0982 20.7672 32.075 19.735 32.0303L18.5302 31.9727L17.377 31.9043L16.297 31.8299L15.3106 31.7543C14.24 31.6728 13.2324 31.2162 12.4654 30.4648C11.6984 29.7134 11.2212 28.7154 11.1178 27.6467L11.0698 27.1367L10.9798 26.0447C10.8884 24.8652 10.8395 23.6829 10.8334 22.4999C10.8334 21.3203 10.8958 20.0867 10.9798 18.9551L11.0698 17.8631L11.1178 17.3531C11.2212 16.2846 11.6982 15.2868 12.465 14.5354C13.2317 13.784 14.239 13.3272 15.3094 13.2455L16.2946 13.1687L17.3746 13.0955L18.529 13.0271L19.7338 12.9695C20.7664 12.9248 21.7998 12.9016 22.8334 12.8999ZM22.8334 15.2999C21.8434 15.2999 20.8246 15.3263 19.8334 15.3671L18.6598 15.4235L17.533 15.4895L16.4746 15.5615L15.505 15.6371C14.9952 15.6728 14.5146 15.8881 14.1486 16.2446C13.7825 16.6012 13.5548 17.076 13.5058 17.5847C13.3654 19.0355 13.2334 20.8415 13.2334 22.4999C13.2334 24.1583 13.3654 25.9643 13.5058 27.4151C13.6078 28.4615 14.4382 29.2751 15.505 29.3627L16.4746 29.4371L17.533 29.5091L18.6598 29.5763L19.8334 29.6327C20.8246 29.6735 21.8434 29.6999 22.8334 29.6999C23.8234 29.6999 24.8422 29.6735 25.8334 29.6327L27.007 29.5763L28.1338 29.5103L29.1922 29.4383L30.1618 29.3627C30.6715 29.327 31.1521 29.1117 31.5182 28.7552C31.8842 28.3986 32.112 27.9238 32.161 27.4151C32.3014 25.9643 32.4334 24.1583 32.4334 22.4999C32.4334 20.8415 32.3014 19.0355 32.161 17.5847C32.112 17.076 31.8842 16.6012 31.5182 16.2446C31.1521 15.8881 30.6715 15.6728 30.1618 15.6371L29.1922 15.5627L28.1338 15.4907L27.007 15.4235L25.8334 15.3671C24.8339 15.3242 23.8337 15.3018 22.8334 15.2999ZM20.4334 19.5899C20.4333 19.4726 20.4619 19.3571 20.5166 19.2534C20.5714 19.1496 20.6506 19.0609 20.7475 18.9947C20.8443 18.9286 20.9559 18.8872 21.0724 18.874C21.189 18.8608 21.307 18.8763 21.4162 18.9191L21.5134 18.9671L26.5534 21.8759C26.6537 21.9338 26.7386 22.0151 26.8009 22.1128C26.8631 22.2106 26.9008 22.3219 26.9108 22.4373C26.9209 22.5528 26.9029 22.6689 26.8584 22.7759C26.8139 22.8829 26.7443 22.9776 26.6554 23.0519L26.5534 23.1239L21.5134 26.0339C21.4118 26.0927 21.2974 26.1258 21.1801 26.1303C21.0628 26.1348 20.9462 26.1105 20.8405 26.0597C20.7347 26.0088 20.643 25.9328 20.5733 25.8384C20.5036 25.744 20.458 25.634 20.4406 25.5179L20.4334 25.4099V19.5899Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "tiktok",
    name: "TikTok",
    icon: (
      <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22.6666" cy="22.5" r="22" fill="black"/>
        <g clipPath="url(#clip0_521_19816)">
          <path d="M22.1666 20.3C20.7566 19.8796 19.2501 19.9142 17.8609 20.3989C16.4717 20.8835 15.2705 21.7936 14.428 22.9997C13.5854 24.2059 13.1444 25.6469 13.1675 27.1181C13.1906 28.5892 13.6766 30.0156 14.5566 31.1948C15.4366 32.374 16.6657 33.2459 18.0694 33.6867C19.4731 34.1275 20.9801 34.1148 22.3762 33.6503C23.7723 33.1859 24.9865 32.2934 25.8465 31.0996C26.7064 29.9058 27.1683 28.4713 27.1666 27V20C28.5 21.3333 30.5 22 33.1666 22V17C30.5 17 28.5 15.3333 27.1666 12H22.1666V27M22.1666 27C22.1666 26.6044 22.0493 26.2178 21.8296 25.8889C21.6098 25.56 21.2974 25.3036 20.932 25.1522C20.5665 25.0009 20.1644 24.9613 19.7764 25.0384C19.3885 25.1156 19.0321 25.3061 18.7524 25.5858C18.4727 25.8655 18.2822 26.2219 18.2051 26.6098C18.1279 26.9978 18.1675 27.3999 18.3189 27.7654C18.4702 28.1308 18.7266 28.4432 19.0555 28.6629C19.3844 28.8827 19.7711 29 20.1666 29C20.6971 29 21.2058 28.7893 21.5808 28.4142C21.9559 28.0391 22.1666 27.5304 22.1666 27Z" stroke="white" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </g>
        <defs>
          <clipPath id="clip0_521_19816">
            <rect width="24" height="24" fill="white" transform="translate(11.1666 11)"/>
          </clipPath>
        </defs>
      </svg>
    ),
    placeholder: "Profile URL",
    urlPrefix: "https://tiktok.com/@",
  },
  {
    id: "twitch",
    name: "Twitch",
    icon: (
      <svg width="44" height="45" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22" cy="22.75" r="22" fill="black"/>
        <path fillRule="evenodd" clipRule="evenodd" d="M13.047 12.25L11.5 16.026V31.459H17V34.25H20.093L23.015 31.459H27.485L33.5 25.712V12.25H13.047ZM31.437 24.728L28 28.01H22.5L19.578 30.801V28.011H14.938V14.22H31.437V24.728ZM28 17.997V23.737H25.937V17.997H28ZM22.5 17.997V23.737H20.438V17.997H22.5Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
    urlPrefix: "https://twitch.tv/",
  },
  {
    id: "whatsapp",
    name: "WhatsApp",
    icon: (
      <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="22.3334" cy="22.75" r="22" fill="black"/>
        <path d="M23.545 34.7597L23.5318 34.7621L23.4466 34.8041L23.4226 34.8089L23.4058 34.8041L23.3206 34.7621C23.3078 34.7581 23.2982 34.7601 23.2918 34.7681L23.287 34.7801L23.2666 35.2937L23.2726 35.3177L23.2846 35.3333L23.4094 35.4221L23.4274 35.4269L23.4418 35.4221L23.5666 35.3333L23.581 35.3141L23.5858 35.2937L23.5654 34.7813C23.5622 34.7685 23.5554 34.7613 23.545 34.7597ZM23.863 34.6241L23.8474 34.6265L23.6254 34.7381L23.6134 34.7501L23.6098 34.7633L23.6314 35.2793L23.6374 35.2937L23.647 35.3021L23.8882 35.4137C23.9034 35.4177 23.915 35.4145 23.923 35.4041L23.9278 35.3873L23.887 34.6505C23.883 34.6361 23.875 34.6273 23.863 34.6241ZM23.005 34.6265C22.9997 34.6233 22.9934 34.6223 22.9873 34.6236C22.9813 34.625 22.976 34.6286 22.9726 34.6337L22.9654 34.6505L22.9246 35.3873C22.9254 35.4017 22.9322 35.4113 22.945 35.4161L22.963 35.4137L23.2042 35.3021L23.2162 35.2925L23.221 35.2793L23.2414 34.7633L23.2378 34.7489L23.2258 34.7369L23.005 34.6265Z" fill="white"/>
        <path d="M22.8334 9.25C29.461 9.25 34.8334 14.6224 34.8334 21.25C34.8334 27.8776 29.461 33.25 22.8334 33.25C20.7909 33.2529 18.7818 32.7323 16.9978 31.738L16.6318 31.5244L12.9934 32.5948C12.7954 32.6531 12.5858 32.6599 12.3844 32.6146C12.183 32.5692 11.9966 32.4732 11.8427 32.3355C11.6889 32.1979 11.5728 32.0233 11.5053 31.8282C11.4379 31.6331 11.4214 31.424 11.4574 31.2208L11.4886 31.09L12.559 27.4516C11.4274 25.5811 10.8306 23.4361 10.8334 21.25C10.8334 14.6224 16.2058 9.25 22.8334 9.25ZM22.8334 11.65C21.1145 11.6497 19.4271 12.1109 17.9474 12.9854C16.4676 13.8599 15.2498 15.1156 14.4211 16.6215C13.5924 18.1274 13.1832 19.8282 13.2362 21.5462C13.2892 23.2642 13.8026 24.9365 14.7226 26.3884C14.9602 26.7628 15.0622 27.2236 14.9818 27.6808L14.935 27.8764L14.4058 29.6776L16.207 29.1484C16.7266 28.9948 17.2666 29.0884 17.695 29.3608C18.953 30.1573 20.379 30.6503 21.8604 30.8008C23.3417 30.9513 24.8377 30.7552 26.2302 30.2279C27.6227 29.7006 28.8735 28.8567 29.8836 27.7627C30.8937 26.6688 31.6355 25.3549 32.0504 23.9249C32.4653 22.4949 32.5419 20.988 32.2741 19.5233C32.0063 18.0586 31.4014 16.6763 30.5074 15.4857C29.6133 14.295 28.4545 13.3286 27.1227 12.6629C25.7908 11.9972 24.3223 11.6504 22.8334 11.65ZM19.3558 15.4708C19.4888 15.4139 19.6342 15.3922 19.778 15.408C19.9218 15.4237 20.0591 15.4764 20.1766 15.5608C20.7814 16.0024 21.2614 16.5952 21.6742 17.1736L22.0666 17.7424L22.2502 18.0124C22.3565 18.1671 22.4087 18.3527 22.3988 18.5402C22.3888 18.7277 22.3171 18.9066 22.195 19.0492L22.105 19.1404L20.9962 19.9636C20.9434 20.0027 20.9063 20.0594 20.8916 20.1234C20.8769 20.1874 20.8854 20.2545 20.9158 20.3128C21.1678 20.7688 21.613 21.4492 22.1242 21.9604C22.6366 22.4716 23.3482 22.9468 23.8354 23.2264C23.941 23.2864 24.0682 23.2672 24.1546 23.1892L24.2002 23.1352L24.9214 22.0372C25.0536 21.8606 25.2491 21.7421 25.4669 21.7067C25.6847 21.6714 25.9077 21.7219 26.089 21.8476L26.7406 22.3024C27.3886 22.7644 28.0114 23.2612 28.5046 23.8912C28.5958 24.0096 28.6538 24.1502 28.6726 24.2985C28.6914 24.4468 28.6702 24.5974 28.6114 24.7348C28.1362 25.8436 26.9326 26.788 25.6822 26.7424L25.4914 26.7304L25.2622 26.7088L25.1326 26.692L24.847 26.644C23.7382 26.4352 21.961 25.8064 20.119 23.9656C18.2782 22.1236 17.6494 20.3464 17.4406 19.2376L17.3926 18.952L17.3626 18.7024L17.347 18.4924L17.3422 18.4024C17.2966 17.1496 18.2458 15.946 19.3558 15.4708Z" fill="white"/>
      </svg>
    ),
    placeholder: "Profile URL",
  },
  {
    id: "reddit",
    name: "Reddit",
    icon: (
      <img src="/images/reddit.svg" alt="Reddit" width="45" height="45" />
    ),
    placeholder: "Profile URL",
    urlPrefix: "https://reddit.com/u/",
  },
]

interface SocialConnectModalProps {
  isOpen: boolean
  onClose: () => void
  onConnect: (platform: string, url: string) => void
  editingPlatform?: {id: string, name: string, url: string} | null
}

export function SocialConnectModal({ isOpen, onClose, onConnect, editingPlatform }: SocialConnectModalProps) {
  const [selectedPlatform, setSelectedPlatform] = useState<SocialPlatform | null>(null)
  const [profileUrl, setProfileUrl] = useState("")

  // Handle editing mode - pre-select platform and URL
  React.useEffect(() => {
    if (editingPlatform && isOpen) {
      const platform = socialPlatforms.find(p => p.id === editingPlatform.id);
      if (platform) {
        setSelectedPlatform(platform);
        setProfileUrl(editingPlatform.url);
      }
    } else if (!editingPlatform && isOpen) {
      // Reset for new connections
      setSelectedPlatform(null);
      setProfileUrl("");
    }
  }, [editingPlatform, isOpen]);

  if (!isOpen) return null

  const handlePlatformSelect = (platform: SocialPlatform) => {
    setSelectedPlatform(platform)
    setProfileUrl("")
  }

  const handleConnect = () => {
    if (selectedPlatform && profileUrl.trim()) {
      const fullUrl = selectedPlatform.urlPrefix
        ? `${selectedPlatform.urlPrefix}${profileUrl.trim()}`
        : profileUrl.trim()
      onConnect(selectedPlatform.id, fullUrl)
      handleClose()
    }
  }

  const handleClose = () => {
    setSelectedPlatform(null)
    setProfileUrl("")
    onClose()
  }


  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
      <div
        className="bg-white rounded-lg"
        style={{
          width: "351px",
          height: selectedPlatform ? "220px" : "393px",
        }}
      >
        {!selectedPlatform ? (
          // Platform Selection Modal
          <div className="relative w-full h-full">
            <div
              className="absolute flex flex-col items-start"
              style={{
                width: "317px",
                height: "45px",
                left: "calc(50% - 317px/2 + 0.5px)",
                top: "19px",
              }}
            >
              <div className="flex flex-col items-start gap-1 w-full h-full">
                <h2
                  className="w-full h-6 font-semibold text-base leading-6 text-black"
                  style={{ fontFamily: "Poppins" }}
                >
                  {editingPlatform ? 'Edit Social Platform' : 'Connect Social Platform'}
                </h2>
                <p className="w-full h-4 font-normal text-xs leading-4 text-black" style={{ fontFamily: "Poppins" }}>
                  {editingPlatform ? 'Choose a platform to edit' : 'Choose a platform to connect to your profile'}
                </p>
              </div>
            </div>

            <button onClick={handleClose} className="absolute w-6 h-6" style={{ left: "323px", top: "13px" }}>
              <X className="h-4 w-4 text-black" strokeWidth={1.5} />
            </button>

            <div className="absolute" style={{ width: "195px", height: "262px", left: "78px", top: "90px" }}>
              <div className="grid grid-cols-3 gap-x-[31.33px] gap-y-[28.25px]">
                {socialPlatforms.map((platform) => (
                  <button
                    key={platform.id}
                    onClick={() => handlePlatformSelect(platform)}
                    className={`flex items-center justify-center rounded-full transition-opacity hover:opacity-80`}
                    style={{
                      width: "44px",
                      height: "44px",
                      backgroundColor: platform.isGray ? "#848282" : "#000000",
                    }}
                  >
                    {platform.icon}
                  </button>
                ))}
              </div>
            </div>
          </div>
        ) : (
          // URL Input Modal
          <div className="relative w-full h-full">
            {/* Frame 703 - Main content container */}
            <div
              className="absolute flex flex-col items-center"
              style={{
                padding: "0px",
                gap: "16px",
                width: "320px",
                height: "159px",
                left: "16px",
                top: "calc(50% - 159px/2 + 0.5px)",
              }}
            >
              {/* Frame 691 & 697 - Header section */}
              <div
                className="flex flex-col items-start w-full"
                style={{
                  padding: "0px",
                  gap: "4px",
                  width: "320px",
                  height: "45px",
                }}
              >
                <h2
                  className="w-full text-black"
                  style={{
                    fontFamily: "Poppins",
                    fontWeight: 600,
                    fontSize: "16px",
                    lineHeight: "24px",
                    height: "24px",
                  }}
                >
                  {editingPlatform ? 'Edit' : 'Connect'} {selectedPlatform.name}
                </h2>
                <p
                  className="w-full text-black"
                  style={{
                    fontFamily: "Poppins",
                    fontWeight: 400,
                    fontSize: "11px",
                    lineHeight: "16px",
                    height: "17px",
                  }}
                >
                  {editingPlatform ? 'Update your username or profile URL' : 'Enter your username or profile URL'}
                </p>
              </div>

              {/* Frame 702 - Icon and input row */}
              <div
                className="flex flex-row items-center w-full"
                style={{
                  padding: "0px",
                  gap: "8px",
                  width: "320px",
                  height: "44px",
                }}
              >
                {/* Group 384 - Icon container */}
                <div
                  className="relative flex items-center justify-center rounded-full"
                  style={{
                    width: "44px",
                    height: "44px",
                    backgroundColor: selectedPlatform.isGray ? "#848282" : "#000000",
                  }}
                >
                  {selectedPlatform.icon}
                </div>

                {/* Frame 654 - Input field */}
                <div
                  className="flex flex-row items-center box-border"
                  style={{
                    padding: "9px",
                    gap: "10px",
                    width: "268px",
                    height: "38px",
                    border: "1px solid #848282",
                    borderRadius: "6px",
                  }}
                >
                  <input
                    type="text"
                    placeholder="Profile URL"
                    value={profileUrl}
                    onChange={(e) => setProfileUrl(e.target.value)}
                    className="w-full h-full bg-transparent border-none outline-none text-black placeholder-gray-500"
                    style={{
                      fontFamily: "Poppins",
                      fontWeight: 400,
                      fontSize: "11px",
                      lineHeight: "16px",
                      color: profileUrl ? "#000000" : "#616161",
                    }}
                  />
                </div>
              </div>

              {/* Component 49 - Connect button */}
              <button
                onClick={handleConnect}
                disabled={!profileUrl.trim()}
                className="flex flex-row justify-center items-center w-full disabled:opacity-50"
                style={{
                  padding: "4px 8px",
                  gap: "8px",
                  width: "320px",
                  height: "38px",
                  backgroundColor: "#DC2627",
                  borderRadius: "6px",
                }}
              >
                <span
                  className="text-white"
                  style={{
                    fontFamily: "Poppins",
                    fontWeight: 500,
                    fontSize: "14px",
                    lineHeight: "21px",
                    width: "61px",
                    height: "21px",
                  }}
                >
                  {editingPlatform ? 'Update' : 'Connect'}
                </span>
              </button>
            </div>

            {/* Close button - iconoir:cancel */}
            <button
              onClick={handleClose}
              className="absolute"
              style={{
                width: "24px",
                height: "24px",
                left: "323px",
                top: "13px",
              }}
            >
              <X className="h-4 w-4 text-black" strokeWidth={1.5} />
            </button>
          </div>
        )}
      </div>
    </div>
  )
}
